#!/usr/bin/env node

'use strict';

const _program = require('commander');

const $run = require('../lib/common/run');
const $log = require('../lib/common/log');
const $git = require('../lib/common/git');
const $_branch = require('../lib/module/branch');

/**
 * ----------------
 * 主程序
 * ----------------
 */
_program
    .usage('hotfix <projectname:version> [options]')
    .option('-f, --force', '强力开启')
    .option('-x, --xVersion', '创建x版本')
    .parse(process.argv);

$run.branch('master', (project) => {
    $run.root(() => {
        $_branch.getPatch(project, 'hotfix', (taskType, project, version) => {
            $_branch.create(taskType, project, version);
        });
    });
});
